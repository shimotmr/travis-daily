---
title: "Portal è³‡æ–™æºå¯©è¨ˆï¼šéœæ…‹ JSON vs Supabase å‹•æ…‹è®€å–"
date: "2026-02-09"
type: "research"
tags: ["portal", "supabase", "architecture", "audit"]
---

## å¯©è¨ˆç›®çš„

æª¢æŸ¥ Portal å„é é¢çš„è³‡æ–™ä¾†æºï¼Œæ‰¾å‡ºæ‡‰è©²å¾ Supabase å‹•æ…‹è®€å–ä½†ç›®å‰ä½¿ç”¨éœæ…‹ JSON çš„é …ç›®ã€‚

---

## ç¾æ³ç¸½è¦½

| é é¢ | è³‡æ–™ä¾†æº | ç‹€æ…‹ |
|------|----------|------|
| ç”¢å“æœå°‹ `/products` | âœ… Supabase å³æ™‚æŸ¥è©¢ | æ­£ç¢º |
| ç¶“éŠ·å•† `/api/dealers` | âœ… Supabase å³æ™‚æŸ¥è©¢ | æ­£ç¢º |
| æ¥­å‹™åœ˜éšŠ `/api/team` | âœ… Supabase å³æ™‚æŸ¥è©¢ | æ­£ç¢º |
| ç›®æ¨™è¨­å®š `/api/targets` | âœ… Supabase å³æ™‚æŸ¥è©¢ | æ­£ç¢º |
| æ“ä½œæ—¥èªŒ `/api/logs` | âœ… Supabase å³æ™‚æŸ¥è©¢ | æ­£ç¢º |
| **æ¥­ç¸¾ç®¡ç†** `/performance` | âŒ éœæ…‹ `performance.json` | **éœ€ä¿®æ­£** |
| **æ¡ˆä»¶ç®¡ç†** `/cases` | âŒ éœæ…‹ `cases.json` | **éœ€ä¿®æ­£** |
| ç®¡ç†å“¡ `/api/admins` | âš ï¸ ç¡¬ç·¨ç¢¼ `getAdminList()` | å¯æ”¹é€² |

---

## éœ€è¦ä¿®æ­£çš„é …ç›®

### 1. æ¥­ç¸¾ç®¡ç† (`/api/performance/route.ts`)

**ç¾æ³ï¼š** è®€å–éœæ…‹ `public/data/performance.json`
```typescript
// ç›®å‰åšæ³•
const dataPath = path.join(process.cwd(), 'public', 'data', 'performance.json')
const fileContents = await fs.readFile(dataPath, 'utf8')
```

**å•é¡Œï¼š**
- è³‡æ–™éœ€è¦é€éå¤–éƒ¨è…³æœ¬åŒæ­¥ â†’ æ¨ GitHub â†’ Vercel é‡æ–°éƒ¨ç½²æ‰æ›´æ–°
- å»¶é²é«˜ï¼šéƒµä»¶åˆ°é” â†’ è…³æœ¬è·‘å®Œ â†’ GitHub push â†’ Vercel buildï¼ˆæœ€å¿« 5-10 åˆ†é˜ï¼‰
- æ¥­å‹™åå–®èˆ‡ Supabase `team` è¡¨è„«é‰¤

**å»ºè­°æ”¹ç‚ºï¼š**
- æ¡ˆä»¶è³‡æ–™å¾ Supabase `cases` è¡¨å³æ™‚æŸ¥è©¢
- é ç®—è³‡æ–™å¾ Supabase `targets` è¡¨è®€å–
- æ¥­å‹™åå–®å¾ Supabase `team` è¡¨è®€å–
- å³æ™‚è¨ˆç®—æ¥­ç¸¾çµ±è¨ˆï¼Œä¸å†ä¾è³´éœæ…‹ JSON

---

### 2. æ¡ˆä»¶ç®¡ç† (`/api/cases/route.ts`)

**ç¾æ³ï¼š** è®€å–éœæ…‹ `public/data/cases.json`

**å•é¡Œï¼š** åŒä¸Šï¼Œéœ€è¦å¤–éƒ¨è…³æœ¬åŒæ­¥

**å»ºè­°æ”¹ç‚ºï¼š**
- ç›´æ¥å¾ Supabase `cases` è¡¨æŸ¥è©¢
- æ”¯æ´ç¯©é¸ã€åˆ†é ã€æœå°‹
- æ¡ˆä»¶ç‹€æ…‹è®Šæ›´å³æ™‚åæ˜ 

---

### 3. ç®¡ç†å“¡åˆ—è¡¨ (`/api/admins/route.ts`)

**ç¾æ³ï¼š** ç¡¬ç·¨ç¢¼ç®¡ç†å“¡æ¸…å–®

**å»ºè­°æ”¹ç‚ºï¼š** å¾ Supabase `team` è¡¨çš„è§’è‰²æ¬„ä½åˆ¤æ–·

---

## è³‡æ–™æµå°æ¯”

### ç¾åœ¨ï¼ˆéœæ…‹ JSON æµç¨‹ï¼‰

```
Zimbra éƒµä»¶ â†’ è…³æœ¬ä¸‹è¼‰ Excel â†’ è§£æç”¢ç”Ÿ JSON
â†’ æ¨ GitHub â†’ Vercel é‡æ–°éƒ¨ç½² â†’ ç”¨æˆ¶çœ‹åˆ°æ–°è³‡æ–™
â±ï¸ å»¶é²ï¼š5-10 åˆ†é˜
```

### ç›®æ¨™ï¼ˆSupabase å‹•æ…‹æµç¨‹ï¼‰

```
Zimbra éƒµä»¶ â†’ è…³æœ¬ä¸‹è¼‰ Excel â†’ ç›´æ¥å¯«å…¥ Supabase
â†’ ç”¨æˆ¶åˆ·æ–°å³çœ‹åˆ°æ–°è³‡æ–™
â±ï¸ å»¶é²ï¼š< 1 åˆ†é˜
```

---

## æ”¹é€ å„ªå…ˆç´š

| é …ç›® | å„ªå…ˆç´š | è¤‡é›œåº¦ | å½±éŸ¿ |
|------|--------|--------|------|
| æ¡ˆä»¶ç®¡ç† â†’ Supabase | é«˜ | ä¸­ | æ¡ˆä»¶å³æ™‚æ›´æ–° |
| æ¥­ç¸¾ç®¡ç† â†’ Supabase | é«˜ | ä¸­ | æ¥­ç¸¾å³æ™‚è¨ˆç®— |
| åŒæ­¥è…³æœ¬æ”¹å¯« | é«˜ | ä½ | Excel â†’ Supabase è€Œé JSON |
| ç®¡ç†å“¡åˆ—è¡¨ | ä½ | ä½ | å½±éŸ¿å° |

---

## Supabase è¡¨ç¾æ³

å·²æœ‰çš„è¡¨ï¼š
- âœ… `team` â€” æ¥­å‹™äººå“¡ï¼ˆ3 ç­†ï¼‰
- âœ… `products` â€” ç”¢å“ç›®éŒ„ï¼ˆ1,274 ç­†ï¼‰
- âœ… `targets` â€” æœˆåº¦ç›®æ¨™
- âœ… `dealers` â€” ç¶“éŠ·å•†

éœ€è¦å»ºç«‹/ç¢ºèªçš„è¡¨ï¼š
- ğŸ”² `cases` â€” æ¡ˆä»¶è³‡æ–™ï¼ˆç›®å‰åªæœ‰ JSONï¼Œéœ€å»ºè¡¨ï¼‰
- ğŸ”² `performance_snapshots` â€” æ¥­ç¸¾å¿«ç…§ï¼ˆå¯é¸ï¼Œç”¨æ–¼æ­·å²è¿½è¹¤ï¼‰

---

## çµè«–

**Products å’Œ Team å·²æ­£ç¢ºä½¿ç”¨ Supabaseï¼Œä½†å…©å€‹æœ€æ ¸å¿ƒçš„é é¢ï¼ˆæ¥­ç¸¾å’Œæ¡ˆä»¶ï¼‰ä»åœ¨è®€éœæ…‹ JSONã€‚** æ”¹é€ å¾Œå¯ä»¥ï¼š

1. æ¶ˆé™¤ GitHub push + Vercel rebuild çš„å»¶é²
2. æ¥­å‹™åå–®ã€é ç®—ã€æ¡ˆä»¶å…¨éƒ¨å¾ Supabase é€£å‹•
3. æœªä¾† LINE Bot ä¹Ÿèƒ½ç›´æ¥æŸ¥åŒä¸€ä»½è³‡æ–™

---

*å¯©è¨ˆæ—¥æœŸï¼š2026-02-09 | Travis*
